# μ•„μ΄ν… 1. μƒμ„±μ λ€μ‹  μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“λ¥Ό κ³ λ ¤ν•λΌ

> ν΄λμ¤λ” μƒμ„±μμ™€ λ³„λ„λ΅ `μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“` λ¥Ό μ κ³µν•  μ μλ‹¤
> 

## public μƒμ„±μ ν™μ©ν•΄ κ°μ²΄ μƒμ„±

```java
public class Student {
	protected int strength, age;

	public Student(int strength, int age) {
		this.strength = strenth;
		this.age = age;
	}
}
```

```java
public class Freshman extends Student {
	//public μƒμ„±μ
	public Freshman() {
		super(100, 20);
	}
}
```

```java
public class Mimmu extends Student {
	//public μƒμ„±μ
	public Mimmu() {
		super(50, 23);
	}
}
```

## static factory method ν™μ©ν•΄ κ°μ²΄ μƒμ„±

**static factory method**λΌλ” μ΄λ¦„μ—μ„λ„ μ• μ μλ“―μ΄ `static method` λ¥Ό ν™μ©ν•μ—¬ κ°μ²΄(μΈμ¤ν„΄μ¤)λ¥Ό μƒμ„±(`factory` : λ¬΄μ–Έκ°€ λ§λ“λ” κ³µμ¥)ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤.

```java
public class Student {

	private int strength, age;

	private Student(int strength, int age) {
		this.strength = strength;
		this.age = age;
	}
	
	// μƒλ‚΄κΈ° μƒμ„±ν•λ” μ •μ  ν©ν† λ¦¬ λ©”μ†λ“
	public static Student newFreshman() {
		return new Student(100, 20);
	}

	// λ°λ¬΄ ν•™μƒ μƒμ„±ν•λ” μ •μ  ν©ν† λ¦¬ λ©”μ†λ“
	public static Student newMimmu() {
		return new Student(50, 23);
	}
}
```

μ •μ  ν©ν† λ¦¬ λ©”μ†λ“λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” μ΄μ λ” λ­κΉ? μ •μ  ν©ν† λ¦¬ λ©”μ†λ“λ” μ—¬λ¬ μ¥μ λ“¤μ„ κ°€μ§„λ‹¤.

## μ •μ  ν©ν† λ¦¬ λ©”μ†λ“μ μ¥μ 

### β–οΈμ΄λ¦„μ„ κ°€μ§ μ μλ‹¤.

- μƒμ„±μμ™€ λ‹¤λ¥΄κ² ν΄λμ¤μ μ΄λ¦„κ³Ό λ™μΌν•μ§€ μ•μ•„λ„ λλ‹¤.
- μƒμ„±μμ™€ λ‹¤λ¥΄κ² λ°ν™λ  **κ°μ²΄μ νΉμ„±μ„ μ΄λ¦„μΌλ΅ λ¬μ‚¬**ν•  μ μκΈ° λ•λ¬Έμ— μ‹κ·Έλ‹μ²(*λ¦¬ν„΄νƒ€μ…, νλΌλ―Έν„°μ λ°μ΄ν„°νƒ€μ…, νλΌλ―Έν„° κ°μ*)κ°€ κ°™μ€ μƒμ„±μκ°€ μ—¬λ¬ κ° ν•„μ”ν•λ‹¤λ©΄ μƒμ„±μ λ€μ‹  κ°κ°μ μ°¨μ΄λ¥Ό μ λ“λ¬λ‚΄λ” μ΄λ¦„μ„ κ°€μ§„ μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“κ°€ μ λ¦¬ν•λ‹¤.

**μμ‹λ¥Ό ν†µν•΄ μ•μ•„λ³΄μ.**

1. `public μƒμ„±μ`λ¥Ό ν™μ©ν•΄ κ°μ²΄ μƒμ„±
    
    ```java
    Student freshman = new Student(100, 20);
    Student mimmu = new Student(50, 23);
    ```
    
    μƒμ„±μμ— λ„κΈ°λ” λ§¤κ°λ³€μμ™€ μƒμ„±μ μμ²΄λ§μΌλ΅λ” λ°ν™λ  κ°μ²΄μ νΉμ„±μ„ μ λ€λ΅ μ„¤λ…ν•μ§€ λ»ν•λ‹¤. `*new Student(50, 23)*`μ μ½”λ“λ¥Ό λ³΄κ³  λ°λ¬΄ ν•™μƒμ„μ„ μ§κ΄€μ μΌλ΅ μ•κΈ° μ–΄λ µλ‹¤.
    
2. `static factory method`λ¥Ό ν™μ©ν•΄ κ°μ²΄ μƒμ„±
    
    ```java
    Student freshman = Student.newFreshman();
    Student mimmu = Student.newMimmu();
    ```
    
    ν•μ§€λ§ μ •μ  ν©ν† λ¦¬ λ©”μ†λ“λ¥Ό μ‚¬μ©ν•λ‹¤λ©΄ μλ―Έλ¥Ό νμ•…ν•κΈ° μ‰½λ‹¤. *`newFreshman(), newMimmu()`* μ™€ κ°™μ΄ μ΄λ¦„μ„ κ°€μ§€κ² λλ―€λ΅ μƒλ‚΄κΈ° ν•™μƒ, λ°λ¬΄ ν•™μƒμ„μ„ μ§κ΄€μ μΌλ΅ μ• μ μλ‹¤.
    
    μ΄λ ‡κ² μ •μ  ν©ν† λ¦¬ λ©”μ†λ“ μ΄λ¦„μ„ μ μ ν μ§€μ–΄ λ©”μ„λ“ μ΄λ¦„λ§ λ³΄κ³  κ°μ²΄μ μƒμ„± λ©μ μ„ μ•μ•„λ‚Ό μ μλ‹¤.
    
    ```java
    public class LottoFactory() {
        private static final int LOTTO_SIZE = 6;
        
        private static List<LottoNumber> allLottoNumbers = ...; // 1~45κΉμ§€μ λ΅λ λ„λ²„
    	    
        // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“
        public static Lotto createAutoLotto() {
            Collections.shuffle(allLottoNumbers);
            return new Lotto(allLottoNumbers.stream()
                    .limit(LOTTO_SIZE)
                    .collect(Collectors.toList()));
        }
    	
        // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“
        public static Lotto createManualLotto(List<LottoNumber> lottoNumbers) {
            return new Lotto(lottoNumbers);
        }
        ...
    }
    ```
    

### β–οΈνΈμ¶λ  λ•λ§λ‹¤ μΈμ¤ν„΄μ¤λ¥Ό μƒλ΅ μƒμ„±ν•μ§€λ” μ•μ•„λ„ λλ‹¤.

- λ¶λ³€ ν΄λμ¤(immutable class)λ” μΈμ¤ν„΄μ¤λ¥Ό λ―Έλ¦¬ λ§λ“¤μ–΄ λ†“κ±°λ‚ μƒλ΅ μƒμ„±ν• μΈμ¤ν„΄μ¤λ¥Ό μΊμ‹±ν•μ—¬ μ¬ν™μ©ν•λ” μ‹μΌλ΅ λ¶ν•„μ”ν• κ°μ²΄ μƒμ„±μ„ ν”Όν•  μ μλ‹¤.
- κ°™μ€ κ°μ²΄κ°€ μμ£Ό μ”μ²­λλ” μƒν™©μ΄λΌλ©΄ μ„±λ¥μ„ μ¬λ ¤μ¤€λ‹¤.

<aside>
π’΅ **μΈμ¤ν„΄μ¤ ν†µμ (instance-controlled) ν΄λμ¤ (μ•„μ§ μ΄ν•΄κ°€ μ μ• λλ‹¤)**
λ°λ³µλλ” μ”μ²­μ— κ°™μ€ κ°μ²΄λ¥Ό λ°ν™ν•λ” μ‹μΌλ΅ μ •μ  ν©ν„°λ¦¬ λ°•μ‹μ ν΄λμ¤λ” μ–Έμ  μ–΄λ μΈμ¤ν„΄μ¤λ¥Ό μ‚΄μ•„ μκ² ν• μ§€λ¥Ό ν†µμ ν•  μ μλ‹¤.
**- ν†µμ ν•λ” μ΄μ **
1. ν΄λμ¤λ¥Ό μ‹±κΈ€ν„΄(μ¤μ§ ν•λ‚λ§ μƒμ„±ν•  μ μλ” ν΄λμ¤)μΌλ΅ λ§λ“¤ μ μλ‹¤.
2. μΈμ¤ν„΄μ¤ν™” λ¶κ°€(μ •μ μΈ λ³€μμ™€ λ©”μ†λ“λ΅ κµ¬μ„±)λ΅ λ§λ“¤ μλ„ μλ‹¤.
3. λ¶λ³€κ°’ ν΄λμ¤μ—μ„ λ™μΉμΈ μΈμ¤ν„΄μ¤κ°€ λ‹¨ ν•λ‚λΏμ„μ„ λ³΄μ¥ν•  μ μλ‹¤. (a==bμΌλ•λ§ a.equals(b)μ„±λ¦½)

</aside>

### β–οΈλ°ν™ νƒ€μ…μ ν•μ„ νƒ€μ… κ°μ²΄λ¥Ό λ°ν™ν•  μ μλ” λ¥λ ¥μ΄ μλ‹¤.

λ°ν™ν•  κ°μ²΄μ ν΄λμ¤λ¥Ό μμ λ΅­κ² μ„ νƒν•  μ μκ²ν•λ” μ μ—°μ„±μ„ μ κ³µν•λ‹¤. APIλ¥Ό λ§λ“¤ λ• ν•μ„ νƒ€μ…μ κ°μ²΄λ¥Ό λ°ν™ν•λ” κ²ƒμ„ μ‘μ©ν•λ©΄ κµ¬ν„ ν΄λμ¤λ¥Ό κ³µκ°ν•μ§€ μ•κ³ λ„ κ·Έ κ°μ²΄λ¥Ό λ°ν™ν•  μ μμ–΄ API*(κ° ν΄λμ¤μ— λ€ν•΄ μ„¤λ…ν•΄λ†“μ€ μλ£)*λ¥Ό μ‘κ² μ μ§€ν•  μ μλ‹¤. (λ‹¤λ¥Έ κ°λ°μλ“¤μ΄ λ¬΄μ–Έκ°€λ¥Ό λ§λ“¤ λ• μµν€μ•Ό ν•  APIκ°€ μ‘μ•„μ„ μ‰½κ² λ°°μ›μ„ μ‚¬μ©ν•  μ μλ‹¤)

**μμ‹λ¥Ό ν†µν•΄ μ•μ•„λ³΄μ**

1. μ •μ  ν©ν† λ¦¬ λ©”μ†λ“κ°€ ν™μ©λμ§€ μ•μ€ κ²½μ°

```java
public class Level {}

public class Advanced extends Level {}

public class Intermediate extends Level {}

public class Basic extends Level {}
```

API λ¬Έμ„μ—μ„ Level, Advanced, Intermediate, Basic ν΄λμ¤λ¥Ό λ¨λ‘ μ΄ν•΄ν•΄μ•Ό ν•κ³  μ μμ— λ”°λΌ λ λ²¨ μΈμ¤ν„΄μ¤λ¥Ό λ°ν™ν•κΈ° μ„ν•΄ λ§¤λ² μ μ λ°ν™ λ΅μ§μ„ λ°λ³µν•΄μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. μ΄ κ²½μ° μ¤‘λ³µμ΄ μΌμ–΄λ‚  κ°€λ¥μ„±μ΄ λ†’κ³ , API λ¬Έμ„κ°€ λ³µμ΅ν•΄μ Έ λ‹¤λ¥Έ κ°λ°μλ“¤μ΄ μ‚¬μ©ν•λ” λ°μ— μ–΄λ µλ‹¤.

1. μ •μ  ν©ν† λ¦¬ λ§¤μ†λ“κ°€ ν™μ©λ κ²½μ°

```java
public class Level {
	public static Level of(int score) {
		if(score < 50) {
			return new Basic();
		} else if(score < 80) {
			return new Intermediate();
		} else {
			return new Advanced();
		}
	}
}

class Advanced extends Level{}

class Intermediate extends Level{}

class Basic extends Level{}
```

API λ¬Έμ„μ—μ„Β `Level`Β ν΄λμ¤μ λ¶€λ¶„μ„ μ½μ–΄λ³΄κ³ ,Β `of(int score)`λΌλ” λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ λμ΄λ‹¤.μ¦‰,Β `Advanced`,Β `Intermediate`,Β `Basic`Β ν΄λμ¤μ— λ€ν•΄μ„λ” μΊ΅μν™”κ°€ λμ–΄ κ°μ²΄ μƒμ„± μΈν„°νμ΄μ¤κ°€ κ°„λ‹¨ν•΄μ΅λ‹¤.

### β–οΈμ…λ ¥ λ§¤κ°λ³€μμ— λ”°λΌ λ§¤λ² λ‹¤λ¥Έ ν΄λμ¤μ κ°μ²΄λ¥Ό λ°ν™ν•  μ μλ‹¤.

```java
class Book {
	//μ •μ  ν©ν† λ¦¬ λ©”μ†λ“
	public static Book getBook(String name) {
		if("EffectiveJava".equals(name)) {
			return new EffectiveJava();
		} else if("CleanCode".equals(name)) {
			return new CleanCode();
		} else {
			return new SelfishGene();
		}
	}

	class EffectiveJava extends Book{}
	
	class CleanCode extends Book{}

	class SelfishGene extends Book{}

	public class Item1 {
		//μ…λ ¥ λ§¤κ°λ³€μμ— λ”°λΌ λ§¤λ² λ‹¤λ¥Έ ν΄λμ¤μ κ°μ²΄λ¥Ό λ°ν™ν•  μ μλ‹¤.
		Book book = Book.getBook("EffectiveJava");
		System.out.println(book.getClass().getName());
	}
}
```

λ°ν™ νƒ€μ…μ ν•μ„νƒ€μ…μ΄λΌλ©΄ μ–΄λ–¤ ν΄λμ¤μ κ°μ²΄λ¥Ό λ°ν™ν•λ“  μƒκ΄€μ—†λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” ν©ν† λ¦¬κ°€ κ±΄λ„¤μ£Όλ” κ°μ²΄κ°€ μ–΄λ ν΄λμ¤μ μΈμ¤ν„΄μ¤μΈμ§€ μ• μλ„ μ—†κ³ , μ• ν•„μ”λ„ μ—†λ‹¤.

### β–οΈ****************************************************************************************************************************************************************************************************************************μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ¥Ό μ‘μ„±ν•λ” μ‹μ μ—λ” λ°ν™ν•  κ°μ²΄μ ν΄λμ¤κ°€ μ΅΄μ¬ν•μ§€ μ•μ•„λ„ λλ‹¤****************************************************************************************************************************************************************************************************************************

```java
public class Level {
    // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“
    public static Level of(int score) {
        return new Basic();
    }
}

class Basic extends Level {
}
```

μ„μ—μ„Β `Level.of(int score)`λΌλ” **λ©”μ„λ“μ κµ¬ν„μ²΄ λ¶€λ¶„μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ κµ¬ν„ν•μ§€ μ•λ„λ΅** ν•  μ μκ² ν•¨μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬ν„μ²΄λ΅λ¶€ν„° λ¶„λ¦¬λ¥Ό ν•  μ μλ‹¤. μ΄κ²ƒμ΄ ******************μ„λΉ„μ¤ μ κ³µμ ν”„λ μ„μ›ν¬(ex. JDBC)λ¥Ό λ§λ“λ” κ·Όκ°„μ΄ λλ‹¤.******************

μλ¥Ό λ“¤λ©΄, ν΄λΌμ΄μ–ΈνΈκ°€ λ λ²¨μ„ μ–»λ” λ΅μ§μ„ κµ¬ν„ν•΄μ•Ό λλ‹¤κ³  κ°€μ •ν•μ. λ λ²¨μ„ μ‚°μ¶ν•λ” μ‹μ¤ν…μ΄ λ‹¬λΌμ§μ— λ”°λΌμ„ λ§¤λ² ν΄λΌμ΄μ–ΈνΈκ°€ λ΅μ§μ„ μμ •ν•λ©΄ λ¶νΈν•  κ²ƒμ΄λ‹¤. ν•μ§€λ§ μ„μ™€ κ°™μ€ μ •μ  ν©ν† λ¦¬ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•¨μΌλ΅μ¨ λ°‘κ³Ό κ°™μ΄Β `Level.of(int score)`μ **λ΅μ§μ„ λ°”κΎΈλ”λΌλ„ ν΄λΌμ΄μ–ΈνΈλ” κ·Έλ€λ΅ μμ • μ—†μ΄ λ™μΌν• λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ©΄ λλ‹¤**. μ΄κ²ƒμ΄ λ°”λ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό κµ¬ν„μ²΄λ΅λ¶€ν„° λ¶„λ¦¬ν• κ²ƒμ΄λ‹¤. μ΄ λ•λ¶„μ— λ©”μ„λ“λ” κ·Έλ€λ΅ μ μ§€ν• μ±„λ΅, κµ¬ν„μ²΄λ§ λ°”κΏ”λΌμΈ μ μλ” κ²ƒμ΄λ‹¤.

```java
public class Level {
    // μ •μ  ν©ν† λ¦¬ λ©”μ„λ“
    public static Level of(int score) {
        if (score < 50) {
            return new Basic();
        } else if (score < 80) {
            return new Intermediate();
        } else {
            return new Advanced();
        }
    }
}

class Basic extends Level {
}
```

λ§μ•½ μ„ ν¨ν„΄μ„ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤λ©΄ ν”„λ μ„μ›ν¬μ μ½”λ“κ°€ μ—…λ°μ΄νΈ λλ©΄ ν΄λΌμ΄μ–ΈνΈλ„ μμ‹ μ΄ κµ¬ν„ν• μ½”λ“λ¥Ό μΌμΌμ΄ λ‹¤ μμ •ν•΄μ•Ό ν•λ‹¤.

- μ›λ

```java
// νΉμ • ν”„λ μ„ μ›ν¬μ—μ„μ ν΄λμ¤ κµ¬μ΅°
public class Level {
}

public class Basic extends Level {
}

///////

// ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•΄μ„ κµ¬ν„ν• λ΅μ§
Level level = new Basic();
```

- ν”„λ μ„μ›ν¬ μ½”λ“ μ—…λ°μ΄νΈλλ©΄?

```java
// νΉμ • ν”„λ μ„ μ›ν¬μ—μ„μ ν΄λμ¤ κµ¬μ΅°
public class Level {
}

public class Basic extends Level {
}

public class Advanced extends Level {
}

public class Intermediate extends Level {
}

////////

//ν΄λΌμ΄μ–ΈνΈλ” μ›λ μ½”λ“κ°€ μ΅΄μ¬ν–λ λ¶€λ¶„μ μ½”λ“λ¥Ό λ‹¤ μΌμΌμ΄ μ΄λ ‡κ² λ°”κΏ”μ¤μ•Ό ν•λ‹¤.
Level level;
if (score < 50) {
  level = new Basic();
} else if (score < 80) {
  level = new Intermediate();
} else {
  level = new Advanced();
}
```

## λ‹¨μ 

### β–οΈ****μƒμ†μ„ ν•λ ¤λ©΄ publicμ΄λ‚ protected μƒμ„±μκ°€ ν•„μ”ν•λ‹ μ •μ  ν©ν„°λ¦¬ λ©”μ„λ“λ§ μ κ³µν•λ©΄ ν•μ„ ν΄λμ¤λ¥Ό λ§λ“¤ μ μ—†λ‹¤****

μ¤νλ ¤ μ¥μ μΌλ΅ λ°›μ•„λ“¤μΌ μλ„ μλ” λ¶€λ¶„(?)

### β–οΈμ •μ  ν©ν„°λ¦¬ λ©”μ„λ“λ” ν”„λ΅κ·Έλλ¨Έκ°€ μ°ΎκΈ° μ–΄λ µλ‹¤

μƒμ„±μμ²λΌ API μ„¤λ…μ— λ…ν™•ν λ“λ¬λ‚μ§€ μ•κΈ° λ•λ¬Έμ— API λ¬Έμ„λ¥Ό μ μ¨λ†“κ³  λ©”μ„λ“ μ΄λ¦„λ„ λ„λ¦¬ μ•λ ¤μ§„ κ·μ•½μ„ λ”°λΌ μ§“λ” μ‹μΌλ΅ λ¬Έμ λ¥Ό μ™„ν™”ν•΄μ¤μ•Ό ν•λ‹¤.
